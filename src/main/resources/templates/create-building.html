<!DOCTYPE html>
<html 
    xmlns:th="http://www.thymeleaf.org" 
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="layout/default_layout"
>
<th:block layout:fragment="content">
    <h1>Create Building</h1>
    <form action="/saveBuilding" method="post">
        <!-- 위도 입력 필드 -->
        <label for="latitude">위도:</label>
        <input type="hidden" id="latitude" name="latitude" th:value="${latitude}" required><br>

        <!-- 경도 입력 필드 -->
        <label for="longitude">경도:</label>
        <input type="hidden" id="longitude" name="longitude" th:value="${longitude}" required><br>

        <!-- 건물 이름 입력 필드 -->
        <label for="name">건물 이름:</label>
        <input type="text" id="name" name="name" required><br>

        <!-- 건물 주소 입력 필드 -->
        <label for="address">건물 주소:</label>
        <input type="text" id="address" name="address" required><br>

        <!-- 엘리베이터 상태 선택 -->
        <label for="elevatorStatus">엘리베이터:</label>
        <label><input type="radio" name="elevatorStatus" value="HAS_ELEVATOR"/>있음</label>
        <label><input type="radio" name="elevatorStatus" value="NO_ELEVATOR"/>없음</label>
        <br>

        <!-- 현관 구조 선택 -->
        <label for="entranceStructure">현관 구조:</label>
        <label><input type="radio" name="entranceStructure" value="STAIRS"/>계단식</label>
        <label><input type="radio" name="entranceStructure" value="CORRIDOR"/>복도식</label>
        <br>

        <!-- 주차 공간 선택 -->
        <label for="parkingSpace">주차 공간:</label>
        <label><input type="radio" name="parkingSpace" value="PLENTY"/>많음</label>
        <label><input type="radio" name="parkingSpace" value="AVERAGE"/>보통</label>
        <label><input type="radio" name="parkingSpace" value="LIMITED"/>적음</label>
        <br>

        <!-- 학군 입력 필드 (반복 가능) -->
        <h2>학군</h2>
        <label><input type="checkbox" name="schoolDistrict[]" value="ELEMENTARY_SCHOOL">초등학교</label>
        <label><input type="checkbox" name="schoolDistrict[]" value="MIDDLE_SCHOOL">중학교</label>
        <label><input type="checkbox" name="schoolDistrict[]" value="HIGH_SCHOOL">고등학교</label>
        <label><input type="checkbox" name="schoolDistrict[]" value="UNIVERSITY">대학교</label>

        <!-- 주변 시설 입력 필드 (반복 가능) -->
        <h2>주변 시설</h2>
        <label><input type="checkbox" name="facility[]" value="RESTAURANT">식당</label>
        <label><input type="checkbox" name="facility[]" value="SUPERMARKET">마트</label>
        <label><input type="checkbox" name="facility[]" value="HOSPITAL">병원</label>
        <label><input type="checkbox" name="facility[]" value="LIBRARY">도서관</label>
        <label><input type="checkbox" name="facility[]" value="ACADEMY">학원</label>
        <label><input type="checkbox" name="facility[]" value="CONVENIENCE_STORE">편의점</label>
        <label><input type="checkbox" name="facility[]" value="DEPARTMENT_STORE">백화점</label>
        <label><input type="checkbox" name="facility[]" value="WAREHOUSE_STORE">창고형 매장</abel>
        <label><input type="checkbox" name="facility[]" value="PARK">공원</label>
        <label><input type="checkbox" name="facility[]" value="GOLF_PRACTICE_RANGE">골프 연습장</abel>
        <label><input type="checkbox" name="facility[]" value="GYM">헬스</label>

        <!-- 교통수단 입력 필드 (반복 가능) -->
        <h2>교통수단</h2>
        <label><input type="checkbox" name="transportation[]" value="SUBWAY">지하철</label>
        <label><input type="checkbox" name="transportation[]" value="BUS">버스</label>
        <label><input type="checkbox" name="transportation[]" value="HIGHWAY">고속도로</label> 

        <input type="submit" value="Save Building">
    </form>

    <script>
        $(document).ready(function() {
            // 폼 제출
            $("#buildingForm").submit(function(event) {
                event.preventDefault(); // 기본 폼 제출 방지

                // 폼 데이터 수집
                var formData = $("#buildingForm").serialize();

                // Building 데이터 저장 요청
                $.ajax({
                    type: "POST",
                    url: "/saveBuilding",
                    data: formData,
                    success: function(response) {
                        // 성공 처리 로직
                        console.log("Building saved successfully.");
                        // Redirect to Building detail page or perform other actions as needed
                    },
                    error: function() {
                        // 오류 처리 로직
                        console.log("Error saving Building.");
                    }
                });
            });
        });
    </script>
</th:block>
</html>
